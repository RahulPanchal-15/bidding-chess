{"version":3,"sources":["ChessBoard.js","Intstructions.js","Stats.js","App.js","index.js"],"names":["ChessBoard","props","handlePromotion","e","a","piece","currentTarget","value","document","getElementById","style","display","paddingBottom","console","log","setState","promotionPiece","currentMove","promotion","result","game","move","board","setPosition","fen","flags","final_fen","hasMoved","lastPGN","getResult","boardChange","state","disableMoveInput","undoMove","undo","enableMoveInput","inputHandler","arr","pgn","split","length","chessGame","in_checkmate","in_draw","in_stalemate","in_threefold_repetition","event","chessboard","removeMarkers","undefined","MARKER_TYPE","dot","parseInt","type","INPUT_EVENT_TYPE","moveStart","moves","square","verbose","addMarker","to","moveDone","from","squareFrom","squareTo","warn","includes","turn","sideTurn","this","Chess","board_element","querySelector","Chessboard","position","orientation","COLOR","white","black","responsive","sprite","url","grid","id","className","name","alignContent","maxWidth","maxHeight","width","height","marginRight","marginTop","onClick","ref","promotionRef","src","alt","Component","Instructions","backgroundColor","activateFn","align","paddingLeft","role","aria-label","href","target","rel","data-bs-toggle","data-bs-target","aria-expanded","aria-controls","aria-labelledby","data-bs-parent","ButtonRows","cursor","image","buttonLabel","btnClass","marginLeft","borderColor","pool","coin","Stats","playerSideImage","playerSide","whitePool","whiteCoins","blackPool","blackCoins","bid","cbid","App","componentDidMount","window","ethereum","isMetaMask","web3","Web3","eth","handleRevert","request","method","loadData","loaded","isMetaMaskInstalled","ubiBalance","listenToAccountChange","accounts","net","getId","networkId","Ubiquito","networks","ubi","Contract","abi","address","factory","ChessFactory","methods","owner","call","factory_owner","balanceOf","ubiBALANCE","isActive","gameExists","getLatestGame","currentGameAddress","ChessGame","FEN","currentFen","currentPlay","getPlayerBids","bids","MIN_BID","minBID","printMinBid","minBid","utils","fromWei","MIN_COIN_BID","minCoinBID","printMinCoinBid","minCoinBid","getPlayerSide","playerS","getPool","whitePOOL","getCoins","whiteCOINS","blackPOOL","blackCOINS","GAME_RESULT","currentResult","connected","rightNetwork","on","location","reload","_chainId","handleBoardChange","moveStatus","activateBidButtons","deactivateBidButtons","installMetamask","onboarding","MetaMaskOnboarding","FORWARDER_MODE","OPEN_TAB","disabled","startOnboarding","buttons","querySelectorAll","bidButtons","counter","activateInstructions","classList","toggle","handleSubmitBidEther","gameRef","current","getBalance","balance","newFEN","side","performMove","send","confirmationNumber","receipt","alert","err","message","handleSubmitBidCoin","approve","then","bind","React","createRef","color","ReactDOM","render"],"mappings":"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","file":"static/js/main.4298c31e.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport Chess from 'chess.js';\r\nimport {Chessboard, INPUT_EVENT_TYPE, COLOR, MARKER_TYPE} from \"cm-chessboard\"\r\n\r\n// import \"./styles/page.css\"\r\nimport \"./styles/cm-chessboard.css\"\r\nimport \"./ChessBoard.css\"\r\n\r\nclass ChessBoard extends Component {\r\n  constructor(props) {\r\n    super();\r\n    this.state = {\r\n      fen: props.fen,\r\n      turn: props.turn,\r\n      final_fen: '',\r\n      move: '',\r\n      hasMoved : false,\r\n      result: props.result,\r\n      sideTurn : props.turn === 1 ? \"w\" : \"b\",\r\n      promotionPiece : null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // let promotion = \"rnbqkb1r/ppppppPp/8/5B1n/8/8/PPPPPpKP/RNBQ2NR b kq - 3 9\";\r\n    this.game = new Chess(this.state.fen);\r\n    // this.game = new Chess(promotion);\r\n    let board_element = document.querySelector(\"#root .App #game #board\")\r\n    this.board = new Chessboard(board_element, {\r\n      position: this.state.fen,\r\n      // position: promotion,\r\n      orientation: parseInt(this.state.turn) === 1 ? COLOR.white : COLOR.black,\r\n      responsive: true,\r\n      sprite: {\r\n        url: \"./chessboard-sprite.svg\", // pieces and markers are stored as svg in the sprite\r\n        grid: 40 // the sprite is tiled with one piece every 40px\r\n      }\r\n    });\r\n    this.board.enableMoveInput(this.inputHandler);\r\n  }\r\n\r\n  handlePromotion = async(e) => {\r\n    let piece = e.currentTarget.value;\r\n    document.getElementById(\"promotion-tray\").style.display = \"none\";\r\n    document.getElementById(\"game\").style.paddingBottom = \"16px\";\r\n    console.log(piece)\r\n    this.setState({\r\n      promotionPiece : piece\r\n    });\r\n    this.currentMove.promotion= piece;\r\n    console.log(this.currentMove);\r\n    // now updates chess according to new promotion value\r\n    const result = this.game.move(this.currentMove);\r\n    console.log(result);\r\n    // refreshes board according to chess engine's FEN value\r\n    this.board.setPosition(this.game.fen());\r\n    switch (result.flags) {\r\n      case \"k\": // Kingside Castling\r\n      case \"q\": // Queenside Castling\r\n      case \"e\": // En Passant\r\n        this.board.setPosition(this.game.fen());\r\n        break;\r\n      default:\r\n        console.log(\"Invalid character\");\r\n    }\r\n    this.setState({\r\n      final_fen: this.game.fen(),\r\n      hasMoved: true,\r\n      move: this.lastPGN(),\r\n      result : this.getResult(this.game)\r\n    });\r\n    this.props.boardChange(true,this.state.result);\r\n    this.board.disableMoveInput();\r\n    return result;\r\n  }\r\n\r\n  undoMove = () => {\r\n    this.game.undo();\r\n    this.board.setPosition(this.game.fen());\r\n    this.setState({\r\n      hasMoved:false\r\n    })\r\n    this.props.boardChange(false);\r\n    this.board.enableMoveInput(this.inputHandler);\r\n  }\r\n\r\n  lastPGN = () => {\r\n    let arr = this.game.pgn().split(\" \");\r\n    return arr[arr.length - 1];\r\n  }\r\n\r\n  getResult = (chessGame) => {\r\n    let result = 0 // NA\r\n    if (chessGame.in_checkmate()) {\r\n      // alert(\r\n      //   `CHECKMATE! ${chessGame.turn() === \"w\" ? \"Black\" : \"White\"} wins (o„Çú‚ñΩ„Çú)o‚òÜ`\r\n      // );\r\n      result = 1; // win\r\n    } else if (chessGame.in_draw()) {\r\n      // alert(`DRAW! No one wins ‚öÜ_‚öÜ`);\r\n      result = 2;\r\n    } else if (chessGame.in_stalemate()) {\r\n      // alert(`STALEMATE! Too bad ‡≤•_‡≤•`);\r\n      result = 2;\r\n    } else if (chessGame.in_threefold_repetition()) {\r\n      // alert(`THREEFOLD REPETITION! Why you do this ‡≤†‚ñÉ‡≤†`);\r\n      result = 2;\r\n    } else {\r\n      result = 0;\r\n    }\r\n    return result;\r\n  }\r\n  \r\n  inputHandler = (event) => {\r\n    // console.log(\"event\", event);\r\n    // removes markers from previous move\r\n    event.chessboard.removeMarkers(undefined, MARKER_TYPE.dot);\r\n    \r\n    if(parseInt(this.state.result)===0){\r\n\r\n      if (event.type === INPUT_EVENT_TYPE.moveStart) {\r\n        // event.type == INPUT_EVENT_TYPE.moveStart, render the move markers\r\n        const moves = this.game.moves({ square: event.square, verbose: true });\r\n        for (const move of moves) {\r\n          event.chessboard.addMarker(move.to, MARKER_TYPE.dot);\r\n        }\r\n        return moves.length > 0;\r\n      } else if (event.type === INPUT_EVENT_TYPE.moveDone) {\r\n        // event.type == INPUT_EVENT_TYPE.moveDone, update chess engine and move piece on chessboard\r\n        this.currentMove = { from: event.squareFrom, to: event.squareTo, promotion: \"q\" };\r\n        let result = this.game.move(this.currentMove);\r\n  \r\n        // handles invalid moves, i.e. moves made which aren't marked on board\r\n        if (!result) {\r\n          console.warn(\"Invalid Move\", this.currentMove);\r\n          return result;\r\n        }\r\n  \r\n        // pawn promotion fix, due to lack of chess engine support to let player chose promotion piece\r\n        if (result.flags.includes(\"p\")) {\r\n          \r\n          console.log(\"Pawn promotion\")\r\n          // undos the default queen promotion\r\n          this.game.undo();\r\n          // returns piece name, based on user input, and sets promotion property of move to returned value\r\n          // this.move.promotion = this.promote();\r\n          // now updates chess according to new promotion value\r\n          // result = this.game.move(this.currentMove);\r\n          // refreshes board according to chess engine's FEN value\r\n          // this.board.setPosition(this.game.fen());\r\n          // undos the default queen promotion\r\n          // this.game.undo();\r\n          // returns piece name, based on user input, and sets promotion property of move to returned value\r\n          document.getElementById(\"promotion-tray\").style.display = \"block\";\r\n          document.getElementById(\"game\").style.paddingBottom = \"2px\";\r\n          return;\r\n        }\r\n  \r\n        switch (result.flags) {\r\n          case \"k\": // Kingside Castling\r\n          case \"q\": // Queenside Castling\r\n          case \"e\": // En Passant\r\n            this.board.setPosition(this.game.fen());\r\n            break;\r\n          default:;\r\n        }\r\n  \r\n        this.setState({\r\n          final_fen: this.game.fen(),\r\n          hasMoved: true,\r\n          result : this.getResult(this.game)\r\n        });\r\n        this.props.boardChange(true,this.state.result);\r\n        this.board.disableMoveInput();\r\n        return result;\r\n      }\r\n      \r\n    }\r\n    // checks whether game_over = true, if yes, reset and new game\r\n    // if (this.game.game_over()) {\r\n    //   alert(\"Game over,please wait for new game to begin!\");\r\n    // }\r\n    \r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"game\" className=\"game\">\r\n        <div\r\n            id='board' \r\n            name = \"chessgame\"\r\n            style={{\r\n              display: 'inline-block',\r\n              alignContent: 'center',\r\n              maxWidth: '60vh',\r\n              maxHeight: '60vh',\r\n              width: `calc(100vw - 40px)`,\r\n              height: `calc(95vw - 40px)`,\r\n              marginRight: '20p',\r\n              marginTop: '20px'\r\n            }}\r\n        >\r\n        </div>\r\n        <div className = \"promotion-tray\" id=\"promotion-tray\" style = {{display: \"none\"}}>\r\n          <b>Pawn Promotion | </b>\r\n          <button id = \"promotion-icon\" value = \"q\" onClick={this.handlePromotion} ref={this.promotionRef}>\r\n            <img src = {this.state.sideTurn+\"q.svg\"} alt=\"wq\"/>\r\n          </button>\r\n          <button id = \"promotion-icon\" value = \"r\" onClick={this.handlePromotion} ref={this.promotionRef}>\r\n          <img src = {this.state.sideTurn+\"r.svg\"} alt=\"wq\"/>\r\n          </button>\r\n          <button id = \"promotion-icon\" value = \"b\" onClick={this.handlePromotion} ref={this.promotionRef}>\r\n            <img src = {this.state.sideTurn+\"b.svg\"} alt=\"wq\"/>\r\n          </button>\r\n          <button id = \"promotion-icon\" value = \"n\" onClick={this.handlePromotion} ref={this.promotionRef}>\r\n          <img src = {this.state.sideTurn+\"n.svg\"} alt=\"wq\"/>\r\n          </button>\r\n        </div>\r\n        {/* <div className=\"container\">\r\n          <button className=\"btn btn-dark\" type=\"button\" id=\"undo-button\" onClick={this.undoMove}>Undo</button>\r\n        </div> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default ChessBoard;","import React from \"react\";\r\n\r\nimport \"./Instructions.css\";\r\n\r\nconst Instructions = (props) => {\r\n  return (\r\n    <nav id=\"sidebar\" className=\"navbar-light\" style = {{ backgroundColor: \"#e3f2fd\"}} >\r\n      <button className=\"closeButton\" onClick={props.activateFn}>\r\n              <img id=\"close-icon\" src=\"./close.svg\" alt=\"close\"/>\r\n        </button>\r\n        <br/> \r\n          <h4><p align=\"center\" style={{paddingLeft:\"20px\"}}>About</p></h4>\r\n          <hr/>\r\n        {/* <p align=\"left\" style={{marginLeft: \"8px\"}}> */}\r\n          <strong>BIDDING CHESS <span role=\"img\" aria-label=\"emoji\">‚ôü</span></strong> is a crypto-based community chess game with a reward model.\r\n          It's a team playing against team, but you don't know who your team mates are.\r\n          You don't have to be a great chess player here, just be here at the right time and bid smart.\r\n          <br/>\r\n          <ul>  \r\n            <li>Make a move <span role=\"img\" aria-label=\"emoji\">üö∂üèº‚Äç‚ôÇÔ∏è</span></li>\r\n            <li>Place your bid <span role=\"img\" aria-label=\"emoji\">üí∞</span></li>\r\n            <li>Confirm the transaction <span role=\"img\" aria-label=\"emoji\">ü§òüèº</span></li>\r\n            <li>Wait for someone else to play (or just tell your friend to <span role=\"img\" aria-label=\"emoji\">üôãüèº‚Äç‚ôÄÔ∏è</span>)</li>\r\n          </ul>\r\n        {/* </p> */}\r\n\r\n          Connect with us here on <a href=\"https://t.me/joinchat/8IcM5D1zIPQyNjE1\" target=\"_blank\" rel=\"noopener noreferrer\">Telegram</a><span role=\"img\" aria-label=\"emoji\">ü§ùüèº</span>\r\n          <hr/>\r\n          <div className=\"accordion\" id=\"accordionExample\">\r\n            <div className=\"accordion-item\">\r\n              <h2 className=\"accordion-header\" id=\"headingOne\">\r\n                <button className=\"accordion-button\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n                  What is &nbsp; <strong>UBIQUITO</strong>\r\n                </button>\r\n              </h2>\r\n              <div id=\"collapseOne\" className=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n                <div className=\"accordion-body\">\r\n                  <strong>UBIQUITO is a token you receive for playing the game.</strong> Obviously, the winners get higher rewards, but we surely won't leave you empty handed from here. Collect UBIQUITO and use them to place your bids.\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"accordion-item\">\r\n              <h2 className=\"accordion-header\" id=\"headingTwo\">\r\n                <button className=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\r\n                  How much reward can I earn?\r\n                </button>\r\n              </h2>\r\n              <div id=\"collapseTwo\" className=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\r\n                <div className=\"accordion-body\">\r\n                  You can earn upto 6%-20% returns on your bids! We take your percentage contribution in the side and reward you accordingly. If your side wins, you get your Ether back along with additional rewards. Rewards are composed of Ether from the loser pool and UBIQUITO! &nbsp;<span role=\"img\" aria-label=\"emoji\">ü§ë</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"accordion-item\">\r\n              <h2 className=\"accordion-header\" id=\"headingFour\">\r\n                <button className=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseFour\" aria-expanded=\"false\" aria-controls=\"collapseFour\">\r\n                  Where can I get UBIQUITO?\r\n                </button>\r\n              </h2>\r\n              <div id=\"collapseFour\" className=\"accordion-collapse collapse\" aria-labelledby=\"headingFour\" data-bs-parent=\"#accordionExample\">\r\n                <div className=\"accordion-body\">\r\n                  Join the telegram channel and send us your address, we can airdrop you some UBI. You can always bid and earn some yourself. <span role=\"img\" aria-label=\"emoji\">ü§ë</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"accordion-item\">\r\n              <h2 className=\"accordion-header\" id=\"headingThree\">\r\n                <button className=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseThree\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\r\n                  What if game ends in a Draw?\r\n                </button>\r\n              </h2>\r\n              <div id=\"collapseThree\" className=\"accordion-collapse collapse\" aria-labelledby=\"headingThree\" data-bs-parent=\"#accordionExample\">\r\n                <div className=\"accordion-body\">\r\n                  We refund all your bids! &nbsp;<span role=\"img\" aria-label=\"emoji\">üòâ</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Instructions;","import React from \"react\";\r\n\r\nimport \"./Stats.css\";\r\n\r\nconst ButtonRows = (props) => {\r\n\r\n\r\n  return (\r\n    <div className = \"row\">\r\n      <div>\r\n        <button className = \"btn\" style={{height: \"8vh\", marginTop: \"2px\", cursor:\"default\"}}>\r\n          <img src={props.image} alt=\"White\"/> {props.buttonLabel}\r\n        </button>\r\n        <br/>\r\n        <button className = {props.btnClass} style={{height: \"6vh\", width: \"fit-content\", marginLeft: \"5px\", marginTop: \"2px\", cursor:\"default\", borderColor:\"black\"}}>\r\n          <span>{props.pool}<img id=\"eth-logo\" src=\"./ethereum.svg\" alt=\"ether\" /></span>\r\n        </button>\r\n        <button className = {props.btnClass} style={{height: \"6vh\", width: \"fit-content\", marginLeft: \"5px\", marginTop: \"2px\", cursor:\"default\", borderColor:\"black\"}}>\r\n          <span>{props.coin}<img id=\"ubi-logo\" src=\"./logo.svg\" alt=\"ether\" /></span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst Stats = (props) => {\r\n\r\n  let playerSideImage = null;\r\n  if(props.playerSide===\"0\"){\r\n    playerSideImage = props.turn===\"1\"? \"wk.svg\" : \"bk.svg\";\r\n  } else {\r\n    playerSideImage = props.playerSide===\"1\"? \"wk.svg\" : \"bk.svg\";\r\n  }\r\n\r\n  return (\r\n    <div className = \"stats-box\">\r\n      <h3>Game Stats</h3>\r\n      <ButtonRows image=\"wk.svg\" buttonLabel = \"Bid\" pool={props.whitePool} coin={props.whiteCoins} btnClass=\"btn btn-light\"/>\r\n      <hr/>\r\n      <ButtonRows image=\"bk.svg\" buttonLabel = \"Bid\" pool={props.blackPool} coin={props.blackCoins} btnClass=\"btn btn-dark\"/>\r\n      <hr/>\r\n      <ButtonRows image={playerSideImage} buttonLabel = \"Your contribution\" pool={props.bid} coin={props.cbid} btnClass=\"btn btn-primary\"/>\r\n      <button className = \"btn\" style={{backgroundColor: \"dodgerblue\", width: \"100%\", marginTop: \"4px\", cursor: \"default\"}}>\r\n        {(props.turn===props.playerSide || props.playerSide===\"0\")  && \r\n          <h4>Your Turn</h4>\r\n        }\r\n        {props.turn!==props.playerSide && props.playerSide!==\"0\" &&\r\n          <h4>Wait for your turn</h4>\r\n        }\r\n  </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Stats;","import React, { Component } from \"react\";\r\nimport ChessBoard from \"./ChessBoard\";\r\nimport Instructions from \"./Intstructions\";\r\nimport Stats from \"./Stats\";\r\nimport Web3 from \"web3\";\r\nimport Ubiquito from \"./contracts/Ubiquito.json\";\r\nimport ChessFactory from \"./contracts/ChessFactory.json\";\r\nimport ChessGame from \"./contracts/ChessGame.json\";\r\nimport MetaMaskOnboarding from '@metamask/onboarding';\r\n\r\nimport \"./App.css\";\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      loaded: false,\r\n      isMetaMaskInstalled: false,\r\n      connected: false,\r\n      rightNetwork : false,\r\n      isActive: false,\r\n      fen: \"\",\r\n      move: \"\",\r\n      ubiBalance: 0,\r\n      whitePool: 0,\r\n      blackPool: 0,\r\n      whiteCoins: 0,\r\n      blackCoins: 0,\r\n      turn: 1,\r\n      hasMoved: false,\r\n      result: 0,\r\n      playerSide: 0,\r\n      minBid: 0,\r\n      minCoinBid: 0\r\n    };\r\n    this.handleBoardChange = this.handleBoardChange.bind(this);\r\n    this.gameRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount = async() => {\r\n    \r\n    const {ethereum} = window;\r\n    if(ethereum && ethereum.isMetaMask) {\r\n      try {\r\n        this.web3 = new Web3(window.ethereum);\r\n        this.web3.eth.handleRevert = true;\r\n        await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n        this.loadData();\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.setState(\r\n          {\r\n            loaded: true,\r\n            isMetaMaskInstalled: (ethereum && ethereum.isMetaMask),\r\n            ubiBalance : 0\r\n          },\r\n          this.listenToAccountChange\r\n        );\r\n      }\r\n    } else {\r\n      this.setState(\r\n        {\r\n          loaded: true,\r\n          isMetaMaskInstalled: (ethereum && ethereum.isMetaMask)\r\n        },\r\n        this.listenToAccountChange\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  loadData = async() => {\r\n    this.web3 = new Web3(window.ethereum);\r\n    this.web3.eth.handleRevert = true;\r\n    this.accounts = await window.ethereum.request({ method: 'eth_accounts' });\r\n    this.networkId = await this.web3.eth.net.getId();\r\n\r\n    if(Ubiquito.networks[this.networkId]) {\r\n\r\n      this.ubi = new this.web3.eth.Contract(\r\n        Ubiquito.abi,\r\n        Ubiquito.networks[this.networkId] &&\r\n          Ubiquito.networks[this.networkId].address\r\n      );\r\n  \r\n      this.factory = new this.web3.eth.Contract(\r\n        ChessFactory.abi,\r\n        ChessFactory.networks[this.networkId] &&\r\n          ChessFactory.networks[this.networkId].address\r\n      );\r\n  \r\n      this.factory_owner = await this.factory.methods.owner().call();\r\n  \r\n      let ubiBALANCE = await this.ubi.methods.balanceOf(this.accounts[0]).call();\r\n  \r\n      let gameExists = await this.factory.methods.isActive().call();\r\n  \r\n      if(gameExists){\r\n        this.currentGameAddress = await this.factory.methods\r\n          .getLatestGame()\r\n          .call();\r\n        console.log(\"Current Game Address!\", this.currentGameAddress);\r\n  \r\n        this.chessGame = new this.web3.eth.Contract(\r\n          ChessGame.abi,\r\n          this.currentGameAddress\r\n        );\r\n  \r\n        let currentFen = await this.chessGame.methods.FEN().call();\r\n        let currentPlay = await this.chessGame.methods.turn().call();\r\n        let bids = await this.chessGame.methods.getPlayerBids(this.accounts[0]).call();\r\n        this.bid = bids[0]\r\n        this.cbid = bids[1]\r\n        let minBID = await this.chessGame.methods.MIN_BID().call();\r\n        this.printMinBid = this.state.minBid.length > 9 ? this.web3.utils.fromWei(this.state.minBid,\"ether\") : this.minBid;\r\n        let minCoinBID = await this.chessGame.methods.MIN_COIN_BID().call();\r\n        this.printMinCoinBid = this.minCoinBid;\r\n        let playerS = await this.chessGame.methods.getPlayerSide(this.accounts[0]).call();\r\n        let whitePOOL = await this.chessGame.methods.getPool(1).call();\r\n        let whiteCOINS = await this.chessGame.methods.getCoins(1).call();\r\n        let blackPOOL = await this.chessGame.methods.getPool(2).call();\r\n        let blackCOINS = await this.chessGame.methods.getCoins(2).call();\r\n        let currentResult = await this.chessGame.methods.GAME_RESULT().call();\r\n        this.setState(\r\n          {\r\n            loaded: true,\r\n            isMetaMaskInstalled : true,\r\n            connected: true,\r\n            rightNetwork: true,\r\n            fen: currentFen,\r\n            turn: currentPlay,\r\n            result: currentResult,\r\n            playerSide: playerS,\r\n            whitePool: whitePOOL,\r\n            blackPool: blackPOOL,\r\n            whiteCoins: whiteCOINS,\r\n            blackCoins: blackCOINS,\r\n            minBid: minBID,\r\n            minCoinBid: minCoinBID,\r\n            ubiBalance : ubiBALANCE,\r\n            isActive: gameExists\r\n          },\r\n          this.listenToAccountChange\r\n        );\r\n      } else {\r\n\r\n        this.setState(\r\n          {\r\n            loaded: true,\r\n            isMetaMaskInstalled : true,\r\n            connected: true,\r\n            rightNetwork: true,\r\n            ubiBalance : ubiBALANCE,\r\n            isActive: gameExists\r\n          },\r\n          this.listenToAccountChange\r\n        );\r\n      }\r\n    } else {\r\n\r\n      this.setState(\r\n        {\r\n          loaded: true,\r\n          isMetaMaskInstalled : true,\r\n          connected: false,\r\n          rightNetwork: false\r\n        },\r\n        this.listenToAccountChange\r\n      );\r\n\r\n    } \r\n  }\r\n\r\n  listenToAccountChange = () => {\r\n    if(this.state.isMetaMaskInstalled){\r\n      window.ethereum.on('accountsChanged', (accounts)  => {\r\n        window.location.reload();\r\n      });\r\n      window.ethereum.on('chainChanged', (_chainId) => window.location.reload());\r\n    }\r\n  }\r\n\r\n  handleBoardChange = (moveStatus, result) => {\r\n    this.setState({\r\n      hasMoved: moveStatus,\r\n    });\r\n    if (moveStatus) {\r\n      this.activateBidButtons();\r\n    } else {\r\n      this.deactivateBidButtons();\r\n    }\r\n  };\r\n\r\n  installMetamask = () => {\r\n    const onboarding = new MetaMaskOnboarding(MetaMaskOnboarding.FORWARDER_MODE.OPEN_TAB);\r\n    const button = document.getElementById(\"install\");\r\n    button.disabled = true;\r\n    onboarding.startOnboarding();\r\n  }\r\n\r\n  activateBidButtons = () => {\r\n    let buttons = document.querySelectorAll(\"#row\");\r\n    for(let rows of buttons){\r\n      let bidButtons = rows.querySelectorAll(\"#bid-buttons #bid-button\");\r\n      for (var counter = 0; counter < bidButtons.length; counter++) {\r\n        bidButtons[counter].className = \"btn btn-light\";\r\n      }\r\n    }\r\n  };\r\n\r\n  activateInstructions = (e) => {\r\n    const sidebar = document.querySelector(\"#sidebar\");\r\n    sidebar.classList.toggle(\"active\");\r\n  };\r\n\r\n  handleSubmitBidEther = async (event) => {\r\n    if (this.gameRef.current.state.hasMoved) {\r\n      const bid = event.currentTarget.value;\r\n      const balance = await this.web3.eth.getBalance(this.accounts[0]);\r\n      if(bid<=balance){\r\n        const result = this.gameRef.current.state.result;\r\n        const newFEN = this.gameRef.current.state.final_fen;\r\n        const move = this.gameRef.current.state.move;\r\n        console.log(move);\r\n        const side = this.state.turn;\r\n        await this.chessGame.methods\r\n          .performMove(result, side, 0, move, newFEN)\r\n          .send({ value: bid, from: this.accounts[0] })\r\n          .on(\"receipt\", (confirmationNumber,receipt)=>{\r\n            alert(\"Transaction Successfull!\");\r\n            window.location.reload();\r\n          })\r\n          .on(\"error\", (err)=> {\r\n            alert(\"Transaction Failed : \",err.message);\r\n          });\r\n      } else{\r\n        alert(\"Insufficient Funds\");\r\n      } \r\n    }\r\n    else {\r\n      alert(\"Make a move!\");\r\n    }\r\n      \r\n  };\r\n\r\n  handleSubmitBidCoin = async (event) => {\r\n    if (this.gameRef.current.state.hasMoved) {\r\n      const bid = event.currentTarget.value;\r\n      if(bid<=this.state.ubiBalance){\r\n        const result = this.gameRef.current.state.result;\r\n        const newFEN = this.gameRef.current.state.final_fen;\r\n        const move = this.gameRef.current.state.move;\r\n        const side = this.state.turn;\r\n        await this.ubi.methods\r\n          .approve(this.currentGameAddress, bid)\r\n          .send({ from: this.accounts[0] })\r\n          .then(async () => {\r\n            await this.chessGame.methods\r\n              .performMove(result, side, bid, move, newFEN)\r\n              .send({ from: this.accounts[0] })\r\n              .on(\"receipt\", (confirmationNumber,receipt)=>{\r\n                alert(\"Transaction Successfull!\");\r\n                window.location.reload();\r\n              })\r\n              .on(\"error\", (err)=> {\r\n                alert(\"Transaction Failed : \",err.message);\r\n              });\r\n            } \r\n          );\r\n      } else {\r\n        alert('Insufficient UBI balance!');\r\n      }\r\n    }\r\n    else {\r\n      alert(\"Make a move!\");\r\n    }\r\n  };\r\n\r\n  render() {\r\n  if (!this.state.loaded) {\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <p align=\"center\">\r\n          <img src=\"loading.gif\" alt=\"Loading\"/>\r\n        </p>\r\n      </div>\r\n    );\r\n      \r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n\r\n      <div className=\"App-header\">\r\n        \r\n        <h1 style={{ color: \"white\", display: \"inline-block\" }}>\r\n          Bidding Chess\r\n        </h1>\r\n        \r\n        <div>\r\n          <button\r\n            type=\"button\"\r\n            id=\"sidebarCollapse\"\r\n            className=\"btn btn-light\"\r\n            onClick={this.activateInstructions}\r\n            >\r\n            <i className=\"fas fa-align-left\"></i>\r\n            <span role=\"img\" aria-label=\"emoji\">About üò≤</span>\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-dark\"\r\n            style={{marginLeft: \"5px\"}}\r\n            >\r\n            UBI Balance: {this.state.ubiBalance}<img id=\"ubi-logo\" src=\"./logo.svg\" alt=\"ubi\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"App-content\">\r\n        \r\n        <div className=\"nav-container\">\r\n          <Instructions activateFn = {this.activateInstructions} />\r\n        </div>\r\n\r\n        {\r\n          this.state.isActive &&\r\n\r\n          <div className=\"board-container\">\r\n            <ChessBoard\r\n              fen={this.state.fen}\r\n              result={this.state.result}\r\n              turn={this.state.turn}\r\n              ref={this.gameRef}\r\n              boardChange={this.handleBoardChange}\r\n              className=\"container\"\r\n            />\r\n            {\r\n              (this.state.turn===this.state.playerSide || this.state.playerSide===\"0\")\r\n              &&\r\n              <div className=\"row\" id=\"row\">\r\n              <div id=\"bid-buttons\" className=\"col\">\r\n                <button\r\n                  id=\"bid-button\"\r\n                  className=\"btn btn-outline-dark\"\r\n                  name=\"bid1\"\r\n                  value={this.state.minBid}\r\n                  onClick={this.handleSubmitBidEther}\r\n                >\r\n                  LOW\r\n                  <img id=\"eth-logo\" src=\"./ethereum.svg\" alt=\"ether\" />\r\n                </button>\r\n              </div>\r\n              <div id=\"bid-buttons\" className=\"col\">\r\n                <button\r\n                  id=\"bid-button\"\r\n                  className=\"btn btn-outline-dark\"\r\n                  name=\"bid2\"\r\n                  value={this.state.minBid * 5}\r\n                  onClick={this.handleSubmitBidEther}\r\n                  >\r\n                  MEDIUM\r\n                  <img id=\"eth-logo\" src=\"./ethereum.svg\" alt=\"ether\" />\r\n                </button>\r\n              </div>\r\n              <div id=\"bid-buttons\" className=\"col\">\r\n                <button\r\n                  id=\"bid-button\"\r\n                  className=\"btn btn-outline-dark\"\r\n                  name=\"bid3\"\r\n                  value={this.state.minBid * 10}\r\n                  onClick={this.handleSubmitBidEther}\r\n                  >\r\n                  HIGH\r\n                  <img id=\"eth-logo\" src=\"./ethereum.svg\" alt=\"ether\" />\r\n                </button>\r\n              </div>\r\n            </div> \r\n            }\r\n            {\r\n              (this.state.turn===this.state.playerSide || this.state.playerSide===\"0\")\r\n              &&\r\n              <div className=\"row\" id=\"row\">\r\n                <div id=\"bid-buttons\" className=\"col\">\r\n                  <button\r\n                    id=\"bid-button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    name=\"bid1\"\r\n                    value={this.state.minCoinBid}\r\n                    onClick={this.handleSubmitBidCoin}\r\n                    >\r\n                    {this.state.minCoinBid}\r\n                    <img id=\"ubi-logo\" src=\"./logo.svg\" alt=\"ubi\" />\r\n                  </button>\r\n                </div>\r\n                <div id=\"bid-buttons\" className=\"col\">\r\n                  <button\r\n                    id=\"bid-button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    name=\"bid2\"\r\n                    value={this.state.minCoinBid * 5}\r\n                    onClick={this.handleSubmitBidCoin}\r\n                  >\r\n                    {this.state.minCoinBid * 5}\r\n                    <img id=\"ubi-logo\" src=\"./logo.svg\" alt=\"ubi\" />\r\n                  </button>\r\n                </div>\r\n                <div id=\"bid-buttons\" className=\"col\">\r\n                  <button\r\n                    id=\"bid-button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    name=\"bid3\"\r\n                    value={this.state.minCoinBid * 10}\r\n                    onClick={this.handleSubmitBidCoin}\r\n                    >\r\n                    {this.state.minCoinBid * 10}\r\n                    <img id=\"ubi-logo\" src=\"./logo.svg\" alt=\"ubi\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            } \r\n          </div>\r\n        }\r\n\r\n        { this.state.isActive &&\r\n          <div className=\"stats-container\">\r\n              <Stats \r\n                turn = {this.state.turn} \r\n                whitePool = {this.web3.utils.fromWei(this.state.whitePool,\"ether\")}\r\n                blackPool = {this.web3.utils.fromWei(this.state.blackPool,\"ether\")}\r\n                whiteCoins = {this.state.whiteCoins}\r\n                blackCoins = {this.state.blackCoins}\r\n                bid = {this.web3.utils.fromWei(this.bid,\"ether\")}\r\n                cbid = {this.cbid}\r\n                playerSide = {this.state.playerSide}\r\n              />\r\n          </div>\r\n        }\r\n\r\n        { !this.state.isActive && this.state.connected && \r\n          <div className=\"not-active\">\r\n            <div className=\"box\">\r\n              <strong>OOPS! Chess Game just ended.</strong>\r\n              <hr/>\r\n              Please wait for us to organise a new game!\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n        { !this.state.isActive && !this.state.isMetaMaskInstalled &&\r\n          <div className=\"not-active\">\r\n            <div className=\"box\">\r\n              <strong>OOPS! Looks like you dont have MetaMask Installed.</strong>\r\n              <hr/>\r\n                <button type=\"button\" id=\"install\" className=\"btn btn-primary\" onClick={this.installMetamask}>\r\n                  Install Metamask\r\n                </button>\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n        { this.state.isMetaMaskInstalled && !this.state.connected && this.state.rightNetwork &&  \r\n          <div className=\"not-active\">\r\n            <div className=\"box\">\r\n              <strong>Connect to MetaMask and choose Ropsten Test Network.</strong>\r\n              <hr/>\r\n                <button type=\"button\" id=\"install\" className=\"btn btn-primary\" onClick={this.loadData}>\r\n                  Connect\r\n                </button>\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n        {\r\n          this.state.isMetaMaskInstalled && !this.state.rightNetwork &&\r\n          <div className=\"not-active\">\r\n            <div className=\"box\">\r\n              <strong>Open MetaMask wallet and choose Ropsten Test Network.</strong>\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}